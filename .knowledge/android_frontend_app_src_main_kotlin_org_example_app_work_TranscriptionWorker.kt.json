{"is_source_file": true, "format": "Kotlin", "description": "This Kotlin source file defines the TranscriptionWorker class for orchestrating offline audio transcription tasks on Android. It manages creating session directories, extracting audio, transcribing with Vosk, generating subtitles, and handling notifications and progress updates.", "external_files": ["org.example.app.media.AudioExtractor", "org.example.app.srt.SrtGenerator", "org.example.app.stt.VoskTranscriber", "org.example.app.storage.FileUtils", "androidx.work.CoroutineWorker", "androidx.work.Data", "androidx.work.ForegroundInfo", "androidx.core.app.NotificationCompat", "android.app.Notification", "android.app.NotificationChannel", "android.app.NotificationManager", "android.content.Context", "java.io.File", "java.io.IOException"], "external_methods": ["org.example.app.media.AudioExtractor.extractToWav", "org.example.app.srt.SrtGenerator.generate", "org.example.app.storage.FileUtils.createOutputSessionDir", "org.example.app.stt.VoskTranscriber.transcribe"], "published": ["TranscriptionWorker"], "classes": [{"name": "TranscriptionWorker", "description": "Worker class that performs the transcription process by extracting audio, transcribing, and generating subtitles, while managing foreground notifications during its operation."}], "methods": [{"name": "doWork", "description": "Main entry point that executes the transcription pipeline, handles exceptions, updates progress, and returns success or failure results."}, {"name": "setProgressPercent", "description": "Updates the progress with current stage, percentage, and message."}, {"name": "failureResult", "description": "Creates a failure Result object with an error message."}, {"name": "getForegroundInfo", "description": "Provides foreground notification info, default implementation."}, {"name": "createForegroundInfo", "description": "Creates a foreground notification with specified content text, establishing notification channel if needed."}, {"name": "ensureChannel", "description": "Ensures that the notification channel exists on Android Oreo and above."}], "calls": ["org.example.app.storage.FileUtils.createOutputSessionDir", "org.example.app.media.AudioExtractor.extractToWav", "org.example.app.stt.VoskTranscriber.transcribe", "org.example.app.srt.SrtGenerator.generate"], "search-terms": ["TranscriptionWorker", "VoskTranscriber", "audio extraction", "subtitle generation", "offline transcription", "foreground notification"], "state": 2, "file_id": 19, "knowledge_revision": 90, "git_revision": "", "hash": "0280ae7b10a3399ecc70454dd6b3d55d", "format-version": 4, "code-base-name": "android_frontend", "filename": "android_frontend/app/src/main/kotlin/org/example/app/work/TranscriptionWorker.kt", "revision_history": [{"90": ""}]}